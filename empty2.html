<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Willingness To Accept Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        label {
            display: block;
            margin-bottom: 10px;
        }

        select {
            padding: 8px;
            font-size: 16px;
        }

        button {
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            margin-right: 10px;
        }
    </style>
    
</head>

<!-- Add Firebase SDK Scripts with defer attribute -->
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-database-compat.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/firebaseui@6.14.2/dist/firebaseui.js"></script>

<!-- Firebase Configuration Script -->

    <script>

      document.addEventListener("DOMContentLoaded", function() {
        const firebaseConfig = {
          apiKey: "AIzaSyDF1e_FBAv4P1krAwTKVyP3F5g4knp4Hew",
          authDomain: "valuestudy.firebaseapp.com",
          databaseURL: "https://valuestudy-default-rtdb.europe-west1.firebasedatabase.app",
          projectId: "valuestudy",
          storageBucket: "valuestudy.appspot.com",
          messagingSenderId: "1092513324979",
          appId: "1:1092513324979:web:b6823acdd1d63aca5935c6"
        };
  
        // Initialize Firebase after the DOM has been fully loaded
        const firebaseApp = firebase.initializeApp(firebaseConfig);
         const provider = new GoogleAuthProvider()
      })
        </script>
<body>


    <h2>Willingness To Accept Form</h2>

    <form id="wtaForm">
        <label for="wta">Select Your Stated Willingness To Accept (WTA):</label>
        <select id="wta" name="wta">
            <option value="0.00">0.00 EUR</option>
            <option value="0.50">0.50 EUR</option>
            <option value="1.00">1.00 EUR</option>
            <option value="1.50">1.50 EUR</option>
            <option value="2.00">2.00 EUR</option>
            <option value="2.50">2.50 EUR</option>
            <option value="3.00">3.00 EUR</option>
            <option value="3.50">3.50 EUR</option>
            <option value="4.00">4.00 EUR</option>
            <option value="4.50">4.50 EUR</option>
            <option value="5.00">5.00 EUR</option>
        </select>

        <br>

        <button id="simulateButton" type="button" onclick="simulateExperiment()">Simulate Experiment</button>
        <button id="showPriceButton" type="button" onclick="showAssignedPrice()" style="display: none;">Show Assigned Price</button>
        <button id="continueButton" type="button" onclick="continueToSurvey()" style="display: none;">Continue to Survey</button>
    </form>


    <script src="https://accounts.google.com/gsi/client" async></script>
    <div id="googleSignInContainer" style="display: none;">
        <div id="g_id_onload"
            data-client_id="1092513324979-549ab8n091mq248s5ltngh19o9p0u876.apps.googleusercontent.com"
            data-context="signin"
            data-ux_mode="redirect"
            data-login_uri="http://localhost:5000/survey.html/"
            data-itp_support="true">
        </div>

        <div class="g_id_signin"
                data-type="standard"
                data-shape="pill"
                data-theme="outline"
                data-text="continue_with"
                data-size="large"
                data-logo_alignment="left"
                data-width="200">
        </div>
    </div>

    <script>
        let assignedPrice;
        let experimentConducted = false;

        function simulateExperiment() {
            if (experimentConducted) {
                alert("Experiment has already been conducted. You cannot redo it.");
                return;
            }

            // Get the selected WTA value
            const selectedWTA = parseFloat(document.getElementById("wta").value);

            // Simulate the random assignment of a price
            assignedPrice = Math.random() * 5; // Random number between 0 and 5

            // Show the assigned price
            alert(`Assigned Price: ${assignedPrice.toFixed(2)} EUR`);

            // Compare the random price with the selected WTA
            if (assignedPrice > selectedWTA) {
                document.getElementById("showPriceButton").style.display = "block";
                document.getElementById("continueButton").style.display = "none";

                // Display the Google Sign-In container
                document.getElementById("googleSignInContainer").style.display = "block";
            } else {
                alert(`You do not need to log in. Continue with the survey.`);
            }

            // Disable the form after the experiment is conducted
            experimentConducted = true;
            document.getElementById("simulateButton").disabled = true;
        }

        function showAssignedPrice() {
            if (assignedPrice === undefined) {
                alert(`Please simulate the experiment first.`);
            } else {
                alert(`Assigned Price: ${assignedPrice.toFixed(2)} EUR`);
            }
        }

        function continueToSurvey() {
            // Redirect to the survey page (replace "survey.html" with the actual page URL)
            window.location.href = "survey.html";
        }
    </script>


<script>
  function onSignIn(googleUser) {
    // Get the user's profile information
    var profile = googleUser.getBasicProfile();
    
    console.log('ID: ' + profile.getId());
    console.log('Name: ' + profile.getName());
    console.log('Email: ' + profile.getEmail());

    // Redirect to another page
    window.location.href = '/survey.html/';  // Replace with your desired URL
  }
</script>



</body>
</html>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Value Study</title>

 
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        label {
            display: block;
            margin-bottom: 10px;
        }

        select {
            padding: 8px;
            font-size: 16px;
        }

        button {
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            margin-right: 10px;
        }
    </style>
    
</head>


<!-- Add Firebase SDK Scripts with defer attribute -->
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-database-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js" defer></script>
    <!-- FirebaseUI CSS -->
    <script src="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth.css" />

<!-- Firebase Configuration Script -->

    <script>

      document.addEventListener("DOMContentLoaded", function() {
        const firebaseConfig = {
          apiKey: "AIzaSyDF1e_FBAv4P1krAwTKVyP3F5g4knp4Hew",
          authDomain: "valuestudy.firebaseapp.com",
          databaseURL: "https://valuestudy-default-rtdb.europe-west1.firebasedatabase.app",
          projectId: "valuestudy",
          storageBucket: "valuestudy.appspot.com",
          messagingSenderId: "1092513324979",
          appId: "1:1092513324979:web:b6823acdd1d63aca5935c6"
        };

        const firebaseApp = firebase.initializeApp(firebaseConfig);
    })

    
</script>


<title> Value Study </title>
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
<link href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" media="screen" rel="stylesheet" type="text/css" />
<link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.css" media="screen" rel="stylesheet" type="text/css" />
<link href="css/frame.css" media="screen" rel="stylesheet" type="text/css" />
<link href="css/controls.css" media="screen" rel="stylesheet" type="text/css" />
<link href="css/widgets.css" media="screen" rel="stylesheet" type="text/css" />
<link href="css/custom.css" media="screen" rel="stylesheet" type="text/css" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="js/menu.js"></script>
<script src="js/footer.js"></script>
<script src="js/widgets.js"></script>
<script src="js/util.js"></script>
<script src="js/custom.js"></script>
<style>
  .menu-widget {
    color: rgb(255, 255, 255) !important;
    opacity: 1 !important;
    font-weight: 700 !important;
  }
</style>
</head>

<script>
    function signInWithGoogle() {
      var provider = new firebase.auth.GoogleAuthProvider();
  
      firebase.auth().signInWithPopup(provider)
        .then(function(result) {
          // User is signed in.
          var user = result.user;
          console.log(user);

          // Redirect to the next page after successful sign-in
        window.location.href = '/survey_preferences.html';
        })
        .catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          console.error(errorCode, errorMessage);
        });
    }
  </script>


<body>
<div class="menu-container"></div>
<div class="content-container">
  <div class="content">
    <div class="content-table flex-column">
        <h2>Willingness To Accept Form</h2>
      <div class="flex-row">
  
        

        <form id="wtaForm">
            <label for="wta">Select Your Stated Willingness To Accept (WTA):</label>
            <select id="wta" name="wta">
                <option value="0.00">0.00 EUR</option>
                <option value="0.50">0.50 EUR</option>
                <option value="1.00">1.00 EUR</option>
                <option value="1.50">1.50 EUR</option>
                <option value="2.00">2.00 EUR</option>
                <option value="2.50">2.50 EUR</option>
                <option value="3.00">3.00 EUR</option>
                <option value="3.50">3.50 EUR</option>
                <option value="4.00">4.00 EUR</option>
                <option value="4.50">4.50 EUR</option>
                <option value="5.00">5.00 EUR</option>
            </select>

            <br>

            <button id="simulateButton" type="button" onclick="simulateExperiment()">Simulate Experiment</button>
            <button id="showPriceButton" type="button" onclick="showAssignedPrice()" style="display: none;">Show Assigned Price</button>
            <button id="continueButton" type="button" onclick="continueToSurvey()" style="display: none;">Continue to Survey</button>

            
        </form>

        </div>
    </div>
</div>

    <script>
        let assignedPrice;
        let experimentConducted = false;

        function simulateExperiment() {
            if (experimentConducted) {
                alert("Experiment has already been conducted. You cannot redo it.");
                return;
            }

            // Get the selected WTA value
            const selectedWTA = parseFloat(document.getElementById("wta").value);

            // Simulate the random assignment of a price
            assignedPrice = Math.random() * 5; // Random number between 0 and 5

            // Show the assigned price
            alert(`Assigned Price: ${assignedPrice.toFixed(2)} EUR`);

            // Compare the random price with the selected WTA
            if (assignedPrice > selectedWTA) {
                document.getElementById("showPriceButton").style.display = "block";
                document.getElementById("continueButton").style.display = "none";

                // Display the Google Sign-In container
                document.getElementById("googleSignInContainer").style.display = "block";
            } else {
                alert(`You do not need to log in with your Google Account. You will get redirected to the survey.`);
                window.location.href = "survey_preferences.html";
            }

            // Disable the form after the experiment is conducted
            experimentConducted = true;
            document.getElementById("simulateButton").disabled = true;
        }

        function showAssignedPrice() {
            if (assignedPrice === undefined) {
                alert(`Please simulate the experiment first.`);
            } else {
                alert(`Assigned Price: ${assignedPrice.toFixed(2)} EUR`);
            }
        }

        function continueToSurvey() {
            // Redirect to the survey page (replace "survey.html" with the actual page URL)
            window.location.href = "survey_preferences.html";
        }
    </script>
<div id="googleSignInContainer" style="display: none;">
<button onclick="signInWithGoogle()">Sign In with Google</button></div>

<script>
  function onSignIn(googleUser) {
    // Get the user's profile information
    var profile = googleUser.getBasicProfile();
    
    console.log('ID: ' + profile.getId());
    console.log('Name: ' + profile.getName());
    console.log('Email: ' + profile.getEmail());

    // Redirect to another page
    window.location.href = '/survey_preferences.html/';  // Replace with your desired URL
  }
</script>




<div class="footer-container"></div>
</body>
</html>
